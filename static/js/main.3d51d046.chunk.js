(window["webpackJsonplast-hope"]=window["webpackJsonplast-hope"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),c=(a(75),a(76),a(19)),u=a(56);function i(e){return{type:"ITEMS_IS_LOADING",isLoading:e}}function l(e){return{type:"COMMENTS_IS_LOADING",isLoading:e}}function m(e){return{type:"PRODUCT_ACTIVE_KEY",activeKey:e}}function p(e,t,a){return{type:"USER_LOGGED_IN",status:e,message:t,token:a}}function d(e){return function(t){t(l(!0)),fetch(e).then(function(e){if(!e.ok)throw Error(e.statusText);return t(l(!1)),e}).then(function(e){return e.json()}).then(function(e){t(function(e){return{type:"PRODUCT_COMMENTS_FETCH_SUCCESS",comments:e}}(e))}).catch(function(){return t({type:"COMMENTS_HAS_ERRORED",hasErrored:!0})})}}var E=a(12),h=a(13),f=a(16),g=a(14),y=a(15),v=a(104),S=a(105),b=a(58),O=a(108),w=a(110),k=function(e){function t(){return Object(E.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchData("http://smktesting.herokuapp.com/api/products/?format=json")}},{key:"render",value:function(){var e=this;return this.props.hasErrored?r.a.createElement("p",null,"Sorry! There was an error loading the items"):this.props.isLoading?r.a.createElement("p",null,"Loading\u2026"):r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(S.a,{style:{margin:"30px auto"}},r.a.createElement(b.a,{md:3},r.a.createElement(O.a,{variant:"pills",activeKey:this.props.activeKey,onSelect:function(t){e.props.setActiveKey(t),e.props.fetchComments("http://smktesting.herokuapp.com/api/reviews/"+t+"?format=json")},className:"flex-column"},this.props.items.map(function(e){return r.a.createElement(O.a.Item,{key:e.id},r.a.createElement(O.a.Link,{eventKey:e.id},e.title))}))),this.props.items.filter(function(t){return t.id==e.props.activeKey}).map(function(e){return r.a.createElement(b.a,{md:4,sm:4,key:e.id},r.a.createElement(w.a,{style:{width:"auto",backgroundColor:"#AFEEEE"}},r.a.createElement(w.a.Img,{style:{margin:"10px 0 10px 0"},variant:"top",src:"http://smktesting.herokuapp.com/static/"+e.img,alt:e.title}),r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,null,e.title),r.a.createElement(w.a.Text,null,"Product description: ",r.a.createElement("br",null),e.text))))}),r.a.createElement(b.a,{md:5,sm:5},r.a.createElement(R,null),r.a.createElement(M,this.props)))))}}]),t}(n.Component),j=function(e){function t(){return Object(E.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.commentsHasErrored?r.a.createElement(w.a,{md:6,sm:6,style:{marginLeft:"50px"}},"Sorry! There was an error loading the comments"):this.props.commentsIsLoading?r.a.createElement(w.a,{md:6,sm:6,style:{marginLeft:"50px"}},"Loading\u2026"):r.a.createElement("div",null,r.a.createElement(w.a,{md:5,sm:5},r.a.createElement("h4",{style:{margin:"10px"}}," Reviews: "),this.props.comments.slice(0).reverse().map(function(e){return r.a.createElement(w.a,{style:{width:"auto",margin:"10px"},key:e.id},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,null,e.created_by.username),r.a.createElement(w.a.Subtitle,{className:"mb-2 text-muted"},"At ",e.created_at),r.a.createElement(w.a.Text,null,"Rate: ",e.rate,r.a.createElement("br",null),"Comment: ",e.text,r.a.createElement("br",null),"Product id: ",e.product)))})))}}]),t}(n.Component),C=a(106),_=a(109),x=a(107),T=function(e){function t(){return Object(E.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this,a=r.a.createElement(C.a,{variant:"primary",type:"submit"},"Submit");return void 0===this.props.userStatus.token&&(e=r.a.createElement(_.a,{key:1,variant:"danger"},r.a.createElement("p",null,"Please, login to add your review.")),a=r.a.createElement(C.a,{variant:"primary",type:"submit",disabled:!0},"Submit")),r.a.createElement("div",null,e,r.a.createElement(w.a,{md:5,sm:5,style:{marginBottom:"20px",padding:"10px"}},r.a.createElement(x.a,{onSubmit:function(e){void 0===t.props.userStatus.token?e.preventDefault():(console.log("http://smktesting.herokuapp.com/api/reviews/"+t.props.activeKey),console.log("Token "+t.props.userStatus.token),console.log("rate"+e.target.elements.rateProduct.value),fetch("http://smktesting.herokuapp.com/api/reviews/"+t.props.activeKey,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+t.props.userStatus.token},body:JSON.stringify({text:e.target.elements.addComment.value,rate:e.target.elements.rateProduct.value})}).then(function(e){return e.json()}).then(function(e){console.log(e.success),t.props.history.push("/"),e.success?console.log(t.props.userStatus.message):(t.props.addUserStatus(e.success,e.message,""),console.log(t.props.userStatus.message))}))}},r.a.createElement(x.a.Group,{controlId:"addComment"},r.a.createElement(x.a.Label,null,"Your review"),r.a.createElement(x.a.Control,{required:!0,as:"textarea",rows:"3"})),r.a.createElement(x.a.Group,{controlId:"rateProduct"},r.a.createElement(x.a.Label,null,"Rate product"),r.a.createElement(x.a.Control,{as:"select"},r.a.createElement("option",null,"1"),r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"))),a)))}}]),t}(n.Component),D=(a(101),function(e){function t(){return Object(E.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this;return!1===this.props.userStatus.status&&(e=r.a.createElement(_.a,{key:1,variant:"danger"},this.props.userStatus.message)),r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(S.a,{style:{margin:"10px 30px"},className:"justify-content-md-center"},e),r.a.createElement(S.a,{style:{margin:"30px"},className:"justify-content-md-center"},r.a.createElement(x.a,{onSubmit:function(e){e.preventDefault();var a=new FormData(e.target);fetch("http://smktesting.herokuapp.com/api/login/",{method:"POST",body:a}).then(function(e){return e.json()}).then(function(e){e.success?(t.props.addUserStatus(e.success,"ok",e.token),console.log(t.props.userStatus.message),t.props.history.push("/")):(t.props.addUserStatus(e.success,e.message,""),console.log(t.props.userStatus.message))})},style:{padding:"20px",border:"4px ridge #D0D0D0"}},r.a.createElement(x.a.Group,{as:S.a,controlId:"username"},r.a.createElement(x.a.Label,{column:!0,sm:3},"Username"),r.a.createElement(b.a,{sm:9},r.a.createElement(x.a.Control,{required:!0,name:"username",type:"text",placeholder:"Username"}))),r.a.createElement(x.a.Group,{as:S.a,controlId:"password"},r.a.createElement(x.a.Label,{column:!0,sm:3},"Password"),r.a.createElement(b.a,{sm:9},r.a.createElement(x.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password"}))),r.a.createElement(C.a,{variant:"primary",type:"submit",style:{marginRight:"5px",float:"right"}},"Submit")))))}}]),t}(n.Component)),I=function(e){function t(){return Object(E.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this;return!1===this.props.userStatus.status&&(e=r.a.createElement(_.a,{key:1,variant:"danger"},this.props.userStatus.message)),!0===this.props.userStatus.status&&(e=r.a.createElement(_.a,{key:1,variant:"success"},this.props.userStatus.message)),r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(S.a,{style:{margin:"10px 30px"},className:"justify-content-md-center"},e),r.a.createElement(S.a,{style:{margin:"30px"},className:"justify-content-md-center"},r.a.createElement(x.a,{onSubmit:function(e){e.preventDefault();var a=new FormData(e.target);fetch("http://smktesting.herokuapp.com/api/register/",{method:"POST",body:a}).then(function(e){return e.json()}).then(function(e){e.success?(t.props.addUserStatus(e.success,"ok",e.token),console.log(t.props.userStatus.message)):(t.props.addUserStatus(e.success,e.message,""),console.log(t.props.userStatus.message))})},style:{padding:"20px",border:"4px ridge #D0D0D0"}},r.a.createElement(x.a.Group,{as:S.a,controlId:"username"},r.a.createElement(x.a.Label,{column:!0,sm:3},"Username"),r.a.createElement(b.a,{sm:9},r.a.createElement(x.a.Control,{required:!0,name:"username",type:"text",placeholder:"Username"}))),r.a.createElement(x.a.Group,{as:S.a,controlId:"password"},r.a.createElement(x.a.Label,{column:!0,sm:3},"Password"),r.a.createElement(b.a,{sm:9},r.a.createElement(x.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password"}))),r.a.createElement(x.a.Group,{as:S.a,controlId:"confirmPassword"},r.a.createElement(x.a.Label,{column:!0,sm:3},"Confirm password"),r.a.createElement(b.a,{sm:9},r.a.createElement(x.a.Control,{required:!0,name:"confirmPassword",type:"password",placeholder:"Password"}))),r.a.createElement(C.a,{variant:"primary",type:"submit",style:{marginRight:"5px",float:"right"}},"Submit")))))}}]),t}(n.Component),L=Object(c.b)(function(e){return{items:e.items,hasErrored:e.itemsHasErrored,isLoading:e.itemsIsLoading,commentsHasErrored:e.commentsHasErrored,commentsIsLoading:e.commentsIsLoading,activeKey:e.activeKey,comments:e.comments}},function(e){return{fetchData:function(t){return e(function(e){return function(t){t(i(!0)),fetch(e).then(function(e){if(!e.ok)throw Error(e.statusText);return t(i(!1)),e}).then(function(e){return e.json()}).then(function(e){t(function(e){return{type:"ITEMS_FETCH_DATA_SUCCESS",items:e}}(e)),t(m(1)),t(d("http://smktesting.herokuapp.com/api/reviews/1?format=json"))}).catch(function(){return t({type:"ITEMS_HAS_ERRORED",hasErrored:!0})})}}(t))},fetchComments:function(t){return e(d(t))},setActiveKey:function(t){return e(m(t))}}})(k),M=Object(c.b)(function(e,t){t.match;return{commentsHasErrored:e.commentsHasErrored,commentsIsLoading:e.commentsIsLoading,comments:e.comments}},function(e){return{}})(j),R=Object(c.b)(function(e){return{activeKey:e.activeKey,userStatus:e.userStatus}},function(e){return{addComment:function(t,a,n){return e(function(e,t,a){return{type:"ADD_COMMENT",id:Object(u.v4)(),product:a,text:e,rate:t,timestamp:(new Date).toISOString().toString(),created_by:{id:1,username:"user"}}}(t,a,n))}}})(T),A=Object(c.b)(function(e){return{userStatus:e.userStatus}},function(e){return{addUserStatus:function(t,a,n){return e(p(t,a,n))}}})(D),N=Object(c.b)(function(e){return{userStatus:e.userStatus}},function(e){return{addUserStatus:function(t,a,n){return e(p(t,a,n))}}})(I),U=a(21),P=a(66),K=a(69);function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return{id:t.id,product:t.product,text:t.text,rate:t.rate,created_at:t.timestamp,created_by:t.created_by};default:return e}}var G=Object(U.c)({items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_FETCH_DATA_SUCCESS":return t.items;default:return e}},itemsHasErrored:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_HAS_ERRORED":return t.hasErrored;default:return e}},itemsIsLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_IS_LOADING":return t.isLoading;default:return e}},commentsHasErrored:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COMMENTS_HAS_ERRORED":return t.hasErrored;default:return e}},commentsIsLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COMMENTS_IS_LOADING":return t.isLoading;default:return e}},comment:H,comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_COMMENTS_FETCH_SUCCESS":return t.comments;case"ADD_COMMENT":return[].concat(Object(K.a)(e),[H({},t)]);default:return e}},activeKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_ACTIVE_KEY":return t.activeKey;default:return e}},userStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGGED_IN":return{status:t.status,message:t.message,token:t.token};default:return e}}});var F,q=a(67),B=a(18),J=function(e){var t=e.location;return r.a.createElement("div",{style:{margin:"30px auto"}},r.a.createElement(v.a,null,r.a.createElement(_.a,{lg:8,variant:"danger"},"Whoops cannot find resource at '",t.pathname,"'")))},W=Object(U.d)(G,F,Object(U.a)(P.a));var Y=function(){return r.a.createElement(c.a,{store:W},r.a.createElement(q.a,null,r.a.createElement(B.c,null,r.a.createElement(B.a,{path:"/login",exact:!0,component:A}),r.a.createElement(B.a,{path:"/register",exact:!0,component:N}),r.a.createElement(B.a,{path:"/",exact:!0,component:L}),r.a.createElement(B.a,{component:J}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,a){e.exports=a(102)},76:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.3d51d046.chunk.js.map